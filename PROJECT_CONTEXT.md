# Контекст проекта: Веб-сайт автомобильных объявлений

## Общая информация
- **Название проекта**: avtozakaz74Site
- **Тип проекта**: Веб-сайт с автомобильными объявлениями
- **Директория**: `C:\Users\parap\PycharmProjects\avtozakaz74Site`
- **Дата создания контекста**: 2026-01-25

## Описание
Веб-сайт для размещения и просмотра автомобильных объявлений.

## Статус
Фронтенд разработан и адаптирован под API che168. Готов к тестированию и деплою.

## Технологический стек
### Backend API:
- **Источник данных**: API che168.com (https://api-centr.ru/che168/)
- **Спецификация**: OpenAPI 3.1.0 (сохранена в api_specification.json)

### Основные возможности API:
1. **Поиск автомобилей** (POST /che168/search_car)
   - Фильтры: бренд, модель, цена, год, пробег, мощность, объем двигателя, тип топлива, город
   - Пагинация и сортировка
   - Автоматический расчет цен в RUB с учетом таможенных сборов

2. **Получение доступных фильтров** (POST /che168/getAvailableFilters)
   - Динамическое построение UI фильтров
   - Поддержка поиска по текстовым полям

3. **Детальная информация об авто** (POST /che168/get_car_info)
   - Подробные данные по ID автомобиля

### Данные автомобилей:
- ID автомобиля (infoid)
- Бренд, модель, модификация
- Цена в CNY и RUB (с таможенными сборами)
- Год выпуска, пробег
- Тип топлива, объем двигателя, мощность
- Город, дилер
- Изображение
- Актуальные курсы валют (CNY, EUR к RUB)

### Аутентификация:
- API Key в заголовке Authorization
- Тарифная система доступа
- Получение токена: https://t.me/api_centr_regbot
- **Токен проекта**: che168-Onh9OZEJchYMZgdXy (не использовать в открытом коде)

## Структура проекта
```
avtozakaz74Site/
├── frontend/                  # React фронтенд приложение
│   ├── src/
│   │   ├── components/       # React компоненты
│   │   │   ├── CarCard.jsx          # Карточка автомобиля
│   │   │   ├── Filters.jsx          # Фильтры поиска
│   │   │   ├── Pagination.jsx       # Пагинация
│   │   │   └── CarDetailModal.jsx   # Модальное окно с деталями
│   │   ├── lib/             # Утилиты
│   │   │   ├── api.js              # API клиент для che168
│   │   │   └── currency.js         # Работа с ценами
│   │   ├── App.jsx          # Главный компонент
│   │   ├── main.jsx         # Точка входа
│   │   └── index.css        # Стили
│   ├── public/              # Статические файлы
│   ├── index.html           # HTML шаблон
│   ├── package.json         # Зависимости npm
│   ├── vite.config.js       # Конфигурация Vite
│   ├── tailwind.config.js   # Конфигурация Tailwind CSS
│   └── postcss.config.js    # Конфигурация PostCSS
├── api_specification.json   # OpenAPI спецификация
└── PROJECT_CONTEXT.md       # Этот файл
```

## Технологический стек фронтенда
- **Framework**: React 18.3.1
- **Build Tool**: Vite 6.0.3
- **Styling**: Tailwind CSS 3.4.17
- **State Management**: React Hooks (useState, useEffect)
- **HTTP Client**: Fetch API

## Реализованный функционал
### Основные возможности:
1. **Поиск автомобилей** с фильтрацией по:
   - Бренд (brandname)
   - Модель (seriesname)
   - Год выпуска (firstregyear)
   - Цена в рублях (total_price_rub)
   - Пробег (mileage)
   - Тип топлива (fuel_type)
   - Объем двигателя в мл (engine_volume_ml)
   - Мощность в кВт (power_kw)

2. **Пагинация результатов**
   - Настраиваемый размер страницы (по умолчанию 10)
   - Навигация по страницам

3. **Отображение информации**
   - Карточки автомобилей с фото
   - Цены с учетом всех сборов
   - Актуальные курсы валют из API

4. **Детальная информация**
   - Модальное окно с полной информацией
   - Галерея фотографий
   - Расчет стоимости

### API интеграция:
- Прямое подключение к https://api-centr.ru/che168/
- Автоматическая трансформация фильтров под формат API
- Обработка ответов с курсами валют
- Обработка ошибок и состояний загрузки

## Запуск проекта
### Установка зависимостей:
```bash
cd frontend
npm install
```

### Разработка:
```bash
npm run dev
```
Приложение будет доступно на http://localhost:5173

### Сборка для продакшена:
```bash
npm run build
```
Собранные файлы будут в папке `frontend/dist/`

### Предпросмотр продакшен сборки:
```bash
npm run preview
```

## Примечания
- Рабочая среда: Windows, PowerShell 5.1
- API документация сохранена в api_specification.json
- Фронтенд использует proxy через Vite для обхода CORS
- Все цены рассчитываются на стороне API
- Токен API хранится в `frontend/src/lib/api.js` (не коммитить в публичный репозиторий!)
