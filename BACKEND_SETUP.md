# Backend ะฟัะพะบัะธ-ัะตัะฒะตั - ะะพัะพะฒ ะบ ะดะตะฟะปะพั!

## โ ะงัะพ ะฑัะปะพ ัะดะตะปะฐะฝะพ

### 1. ะกะพะทะดะฐะฝ Backend (Node.js + Express)
- **ะคะฐะนะปั**:
  - `backend/server.js` - ะพัะฝะพะฒะฝะพะน ัะตัะฒะตั
  - `backend/package.json` - ะทะฐะฒะธัะธะผะพััะธ
  - `backend/Dockerfile` - Docker ะพะฑัะฐะท
  - `backend/.env` - ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ัะพะดะตัะถะธั ัะพะบะตะฝ)
  - `backend/.env.example` - ะฟัะธะผะตั ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ

### 2. ะคัะฝะบัะธะพะฝะฐะป Backend
- ะัะพะบัะธ ะดะปั ัััั API endpoints:
  - `POST /api/search_car` - ะฟะพะธัะบ ะฐะฒัะพะผะพะฑะธะปะตะน
  - `POST /api/get_car_info` - ะดะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั
  - `POST /api/getAvailableFilters` - ะดะพัััะฟะฝัะต ัะธะปัััั
- `GET /health` - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะตัะฐ
- Helmet ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ
- CORS ะทะฐัะธัะฐ
- ะะพะณะธัะพะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ

### 3. ะะฑะฝะพะฒะปัะฝ Frontend
- **ะฃะดะฐะปัะฝ ัะพะบะตะฝ** ะธะท `frontend/src/lib/api.js`
- ะัะต ะทะฐะฟัะพัั ะธะดัั ัะตัะตะท `/api/` ะฑะตะท ัะพะบะตะฝะฐ
- Frontend ะะ ะธะผะตะตั ะดะพัััะฟะฐ ะบ ัะพะบะตะฝั
- Vite proxy ะฝะฐัััะพะตะฝ ะฝะฐ `http://localhost:3000` ะดะปั ัะฐะทัะฐะฑะพัะบะธ
- Nginx proxy ะฝะฐัััะพะตะฝ ะฝะฐ `http://backend:3000` ะดะปั production

### 4. Docker Compose
- ะะพะฑะฐะฒะปะตะฝ ัะตัะฒะธั `backend`
- Frontend ะทะฐะฒะธัะธั ะพั backend (depends_on ั health check)
- Backend ััะฐัััะตั ะฟะตัะฒัะผ, ะทะฐัะตะผ frontend
- ะะฑะฐ ัะตัะฒะธัะฐ ะฒ ะพะดะฝะพะน ัะตัะธ `avtozakaz74-network`

### 5. ะะพะบัะผะตะฝัะฐัะธั
- ะะฑะฝะพะฒะปัะฝ `README.md` ั ะธะฝัะพัะผะฐัะธะตะน ะพ backend
- ะะฑะฝะพะฒะปัะฝ `DEPLOYMENT.md` ั ะธะฝััััะบัะธัะผะธ ะฟะพ ะดะตะฟะปะพั
- ะกะพะทะดะฐะฝ `QUICKSTART.md` ะดะปั ะฑััััะพะณะพ ััะฐััะฐ
- ะกะพะทะดะฐะฝ `backend/README.md` ั ะดะพะบัะผะตะฝัะฐัะธะตะน backend

## ๐ ะะฐะบ ะทะฐะฟัััะธัั

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

#### Backend
```bash
cd backend
npm install
npm run dev
```
Backend ะฝะฐ: http://localhost:3000

#### Frontend
```bash
cd frontend
npm install
npm run dev
```
Frontend ะฝะฐ: http://localhost:5173

### Production (Docker)

```bash
# ะกะพะทะดะฐะนัะต .env ัะฐะนะป
cp backend/.env.example backend/.env
nano backend/.env  # ะดะพะฑะฐะฒััะต ัะพะบะตะฝ

# ะะฐะฟัััะธัะต ะฒัั
docker compose up -d --build

# ะัะพะฒะตัััะต ััะฐััั
docker compose ps
curl http://localhost:3000/health
```

ะัะธะปะพะถะตะฝะธะต ะดะพัััะฟะฝะพ ะฝะฐ: http://localhost

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### โ ะะตะฐะปะธะทะพะฒะฐะฝะพ
- API ัะพะบะตะฝ ััะฐะฝะธััั ัะพะปัะบะพ ะฒ `backend/.env`
- Frontend ะฝะต ะธะผะตะตั ะดะพัััะฟะฐ ะบ ัะพะบะตะฝั
- Backend ะดะพะฑะฐะฒะปัะตั ัะพะบะตะฝ ะฝะฐ ัะตัะฒะตัะต
- Helmet ะดะปั HTTP ะทะฐะณะพะปะพะฒะบะพะฒ ะฑะตะทะพะฟะฐัะฝะพััะธ
- CORS ะทะฐัะธัะฐ

### โ๏ธ ะะฐะถะฝะพ ะดะปั VPS
- ะะธะบะพะณะดะฐ ะฝะต ะบะพะผะผะธัััะต `backend/.env` ะฒ git
- ะัะฟะพะปัะทัะนัะต ัะธะปัะฝัะต ะฟะฐัะพะปะธ
- ะะฐัััะพะนัะต firewall (ะฟะพััั 80, 443, 22)
- ะะฐัััะพะนัะต HTTPS ั Let's Encrypt

## ๐ ะะทะผะตะฝัะฝะฝัะต ัะฐะนะปั

### ะะพะฒัะต ัะฐะนะปั
```
backend/
โโโ server.js
โโโ package.json
โโโ Dockerfile
โโโ .env (ะะ ะฒ git!)
โโโ .env.example
โโโ .dockerignore
โโโ .gitignore
โโโ README.md

QUICKSTART.md
BACKEND_SETUP.md
```

### ะะทะผะตะฝัะฝะฝัะต ัะฐะนะปั
```
frontend/src/lib/api.js       # ัะดะฐะปัะฝ ัะพะบะตะฝ
frontend/vite.config.js       # proxy ะฝะฐ localhost:3000
frontend/nginx.conf           # proxy ะฝะฐ backend:3000
docker-compose.yml            # ะดะพะฑะฐะฒะปะตะฝ backend ัะตัะฒะธั
.gitignore                    # ะดะพะฑะฐะฒะปะตะฝั backend/* ะฟัะฐะฒะธะปะฐ
README.md                     # ะพะฑะฝะพะฒะปะตะฝะฐ ะดะพะบัะผะตะฝัะฐัะธั
DEPLOYMENT.md                 # ะพะฑะฝะพะฒะปะตะฝั ะธะฝััััะบัะธะธ
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะัะพะฒะตัะบะฐ backend
```bash
# Health check
curl http://localhost:3000/health

# ะขะตััะพะฒัะน ะฟะพะธัะบ
curl -X POST http://localhost:3000/api/search_car \
  -H "Content-Type: application/json" \
  -d '{"filters":{},"pagination":{"limit":5,"offset":0}}'
```

### ะัะพะฒะตัะบะฐ frontend
1. ะัะบัะพะนัะต http://localhost:5173 (dev) ะธะปะธ http://localhost (production)
2. ะัะฟะพะปะฝะธัะต ะฟะพะธัะบ ะฐะฒัะพะผะพะฑะธะปะตะน
3. ะัะบัะพะนัะต DevTools โ Network
4. ะฃะฑะตะดะธัะตัั ััะพ ะทะฐะฟัะพัั ะธะดัั ะฝะฐ `/api/` ะฑะตะท ัะพะบะตะฝะฐ ะฒ ะทะฐะณะพะปะพะฒะบะฐั

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ
โ   Browser   โ
โโโโโโโโฌโโโโโโโ
       โ
       โ HTTP
       โ
โโโโโโโโโโโโโโโโโโโ
โ  Frontend       โ
โ  (Nginx:80)     โ
โ  React SPA      โ
โโโโโโโโฌโโโโโโโโโโโ
       โ
       โ /api/* โ proxy
       โ
โโโโโโโโโโโโโโโโโโโ
โ  Backend        โ
โ  (Node:3000)    โ
โ  + API Token    โ
โโโโโโโโฌโโโโโโโโโโโ
       โ
       โ HTTPS + Token
       โ
โโโโโโโโโโโโโโโโโโโ
โ  che168 API     โ
โ  External       โ
โโโโโโโโโโโโโโโโโโโ
```

## ๐ฏ ะกะปะตะดัััะธะต ัะฐะณะธ

### ะะพัะพะฒะพ ะบ ะดะตะฟะปะพั ะฝะฐ VPS
ะัะพะตะบั ะฟะพะปะฝะพัััั ะณะพัะพะฒ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั. ะัะพััะพ:

1. ะะปะพะฝะธััะนัะต ะฝะฐ VPS
2. ะกะพะทะดะฐะนัะต `backend/.env` ั ัะพะบะตะฝะพะผ
3. ะะฐะฟัััะธัะต `docker compose up -d --build`
4. ะะฐัััะพะนัะต ะดะพะผะตะฝ ะธ HTTPS (ะพะฟัะธะพะฝะฐะปัะฝะพ)

### ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
- [ ] Rate limiting ะดะปั ะทะฐัะธัั ะพั ะทะปะพัะฟะพััะตะฑะปะตะฝะธะน
- [ ] ะััะธัะพะฒะฐะฝะธะต ัะฐัััั ะทะฐะฟัะพัะพะฒ (Redis)
- [ ] ะะพะณะธัะพะฒะฐะฝะธะต ะฒ ัะฐะนะปั ะธะปะธ ัะตัะฒะธัั (Winston, Sentry)
- [ ] ะะพะฝะธัะพัะธะฝะณ (Prometheus, Grafana)
- [ ] CI/CD ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน (GitHub Actions)

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker compose logs backend`
2. ะัะพะฒะตัััะต health: `curl http://localhost:3000/health`
3. ะัะพะฒะตัััะต `.env` ัะฐะนะป: `cat backend/.env`
4. ะะตัะตัะธัะฐะนัะต `DEPLOYMENT.md` ะธะปะธ `QUICKSTART.md`

---

**ะัะพะตะบั ะณะพัะพะฒ ะบ production!** ๐
